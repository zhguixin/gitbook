### 链路保活

链路保活用于：消息链路和推送链路，以确保TCP的长连接不断开。

> 其中推送链路所在的进程还要确保进程保活。

链路保活又分为两个方面：

- 维持TCP长连接：心跳机制；

- 优化TCP长连接：复合连接、断线重连。

#### 心跳机制

定时发送心跳包；

#### 复合连接

复合连接机制的基本步骤如下：

1. 客户端连接导航服务器，导航服务器会下发应用对应的配置信息，其中包括连接服务器的地址列表。

2. 客户端从第一个服务器地址尝试连接，并启动超时机制，如果连接失败或没有及时收到服务响应, 则继续尝试连接下一个直到成功连接，将成功连接的地址保存到本地，作为最优地址，后面连接时优先使用此地址。通过这种机制，能保障客户端优先选用最优链路，缩短连接时间。



参考资料:[IM 即时通讯之链路保活](https://www.cnblogs.com/yangtongchao/p/10654424.html)